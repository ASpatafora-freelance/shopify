{% assign arrcol = "" %}
{% assign specitems = "" %}
{% assign cont1 = 0 %}

{% comment %} SLOT 1 {% endcomment %}
{% for cosearr in section.settings.products_list %}
  {% assign arritem = cosearr.title | prepend: ";" %}
  {% assign arrcol = arrcol | append: arritem %}
  {% assign specitem = section.settings.produttore | split: ";" %}
  {% assign specitems = specitems | append: specitem[cont1] %}
  {% assign specitems = specitems | append: "," %}
  {% assign specitem = section.settings.codprodotto | split: ";" %}
  {% assign specitems = specitems | append: specitem[cont1] %}
  {% assign specitems = specitems | append: "," %}
  {% assign specitem = section.settings.scelta | split: ";" %}
  {% assign specitems = specitems | append: specitem[cont1] %}
  {% assign specitems = specitems | append: "," %}
  {% assign specitem = section.settings.materiale | split: ";" %}
  {% assign specitems = specitems | append: specitem[cont1] %}
  {% assign specitems = specitems | append: "," %}
  {% assign specitem = section.settings.finitura | split: ";" %}
  {% assign specitems = specitems | append: specitem[cont1] %}
  {% assign specitems = specitems | append: "," %}
  {% assign specitem = section.settings.effetto | split: ";" %}
  {% assign specitems = specitems | append: specitem[cont1] %}
  {% assign specitems = specitems | append: "," %}
  {% assign specitem = section.settings.stonalizzazione | split: ";" %}
  {% assign specitems = specitems | append: specitem[cont1] %}
  {% assign specitems = specitems | append: "," %}
  {% assign specitem = section.settings.forma | split: ";" %}
  {% assign specitems = specitems | append: specitem[cont1] %}
  {% assign specitems = specitems | append: "," %}
  {% assign specitem = section.settings.formato | split: ";" %}
  {% assign specitems = specitems | append: specitem[cont1] %}
  {% assign specitems = specitems | append: "," %}
  {% assign specitem = section.settings.spessore | split: ";" %}
  {% assign specitems = specitems | append: specitem[cont1] %}
  {% assign specitems = specitems | append: "," %}
  {% assign specitem = section.settings.prezzoscatola | split: ";" %}
  {% assign specitems = specitems | append: specitem[cont1] %}
  {% assign specitems = specitems | append: "," %}
  {% assign specitem = section.settings.prezzomq | split: ";" %}
  {% assign specitems = specitems | append: specitem[cont1] %}
  {% assign specitems = specitems | append: "," %}
  {% assign specitem = section.settings.pesopallet| split: ";" %}
  {% assign specitems = specitems | append: specitem[cont1] %}
  {% assign specitems = specitems | append: "," %}
  {% assign specitem = section.settings.mqpallet | split: ";" %}
  {% assign specitems = specitems | append: specitem[cont1] %}
  {% assign specitems = specitems | append: "," %}
  {% assign specitem = section.settings.scatolepallet | split: ";" %}
  {% assign specitems = specitems | append: specitem[cont1] %}
  {% assign specitems = specitems | append: "," %}
  {% assign specitem = section.settings.mqscatola | split: ";" %}
  {% assign specitems = specitems | append: specitem[cont1] %}
  {% assign specitems = specitems | append: "," %}
  {% assign specitem = section.settings.pesoscatola | split: ";" %}
  {% assign specitems = specitems | append: specitem[cont1] %}
  {% assign specitems = specitems | append: "," %}
  {% assign specitem = section.settings.pezziscatola | split: ";" %}
  {% assign specitems = specitems | append: specitem[cont1] %}
  {% assign specitems = specitems | append: ";" %}
  {% assign cont1 = cont1 | plus: 1 %}
{% endfor %}

{% assign cont2 = 0 %}
{% assign specitems = specitems | prepend: ";" %}

{% assign arrsp = arrcol | split: ";" %}
{% assign sparr = specitems | split: ";" %}
{% assign proidsps = product.title | string %}
{% assign spc = false %}
{% assign spcx = false %}
{% assign spcxd = false %}
{% assign gxxd = 0 %}
{% for i in arrsp %}
    {% if proidsps == i %}
      
        {% assign spc = true %}
  
    {% endif %}
  {% assign edr = i | split: " " %}  
  {% for nedr in edr %}
  {% if proidsps contains nedr %}
      {% assign spcx = true %}
  {% else %}
      {% assign spcx = false %}
  {% endif %}
  {% endfor %}
  {% if spcx == true %}
    {% assign spcxd = true %}
{% assign er = sparr[gxxd] %}
  {% endif %}
  {% if  spcx == false and spc == false %}
  {% assign gxxd = gxxd | plus: 1 %}
  {% endif %}
{% endfor %}
{% for i in arrsp %}
  {% for coll in product.collections %}
{% if i == coll.title %}

        {% assign spc = true %}
    {% endif %}
{% endfor %}
{% endfor %}

{% if spc == true %}
<h2 style="margin-left:14%;">Specifice</h2>
<section style="display:flex;flex-wrap:wrao;">
<div style="width:50%;padding-right:2px;">
<p id="listed" style="text-align:right;font-weight:800;">
  <span>Titolo:<br/></span>
  <span>Produttore:<br/></span>
  <span>Codice prodotto:<br/></span>
  <span>Scelta:<br/></span>
  <span>Materiale:<br/></span>
  <span>Finitura:<br/></span>
  <span>Effetto:<br/></span>
  <span>Stonalizzazione:<br/></span>
  <span>Forma:<br/></span>
  <span>Formato:<br/></span>
  <span>Spessore:<br/></span>
  <span>Prezzo per scatola:<br/></span>
  <span>Prezzo al metro quadro:<br/></span>
  <span>Peso al pallet:<br/></span>
  <span>Mq al pallet:<br/></span>
  <span>Scatole per pallet:<br/></span>
  <span>Mq per scatola:<br/></span>
  <span>Peso per scatola:<br/></span>
  <span>Pezzi per scatola:<br/></span>
</p>
</div>
  <div style="width:50%;padding-left:2px;">
{% assign proidsp = product.title | string %}
{% assign gxsp = 0 %}
{% assign gxspitems = 2 %}
{% assign gxsps = 0 %}<p>{{ product.title }}<br/>
{% for i in arrsp %}
    {% if proidsp == i %}

        {% for j in sparr %}
          {% if gxsps == gxsp %}
             {% assign arri = j | split: "," %}
             {% for z in arri %}
               {% if z=="" %}
                 <style>
                   #listed span:nth-child({{ gxspitems }}){
                     display:none;
                   }
                 </style>
               {% else %} 
                 {{ z }}<br/>
               {% endif %}
               {% assign gxspitems = gxspitems | plus: 1 %}
             {% endfor %}  
            </p>
          {% endif %}
          {% assign gxsps = gxsps | plus: 1 %}
        {% endfor %}  
  
    {% endif %}
  {% assign gxsp = gxsp | plus: 1 %}
  {% assign gxsps = 0 %}
{% endfor %}
  </div>

</section>
{% endif %}
{% if spc == false and spcxd == true %}
{% assign gxspitems = 2 %}
<h2 style="margin-left:14%;">Specifice</h2>
<section style="display:flex;flex-wrap:wrao;">
<div style="width:50%;padding-right:2px;">
<p id="listed" style="text-align:right;font-weight:800;">
  <span>Titolo:<br/></span>
  <span>Produttore:<br/></span>
  <span>Codice prodotto:<br/></span>
  <span>Scelta:<br/></span>
  <span>Materiale:<br/></span>
  <span>Finitura:<br/></span>
  <span>Effetto:<br/></span>
  <span>Stonalizzazione:<br/></span>
  <span>Forma:<br/></span>
  <span>Formato:<br/></span>
  <span>Spessore:<br/></span>
  <span>Prezzo per scatola:<br/></span>
  <span>Prezzo al metro quadro:<br/></span>
  <span>Peso al pallet:<br/></span>
  <span>Mq al pallet:<br/></span>
  <span>Scatole per pallet:<br/></span>
  <span>Mq per scatola:<br/></span>
  <span>Peso per scatola:<br/></span>
  <span>Pezzi per scatola:<br/></span>
</p>
</div>
  <div style="width:50%;padding-left:2px;">
<p>{{ product.title }}<br/>
    {% assign arrin = er | split: "," %}
             {% for z in arrin %}
                  {% if z=="" %}
                 <style>
                   #listed span:nth-child({{ gxspitems }}){
                     display:none;
                   }
                 </style>
               {% else %} 
                 {{ z }}<br/>
               {% endif %}
               {% assign gxspitems = gxspitems | plus: 1 %}
             {% endfor %} 
  </div>

</section>
{% endif %}
{% schema %}
  {
    "name": "specifiche",
    "settings": [
      {
  "type": "product_list",
  "id": "products_list",
  "label": "Prodotti - Slot 1"
},
    {
  "type": "text",
  "id": "produttore",
  "label": "Produttore"
},
    {
  "type": "text",
  "id": "codprodotto",
  "label": "Codice prodotto"
},
    {
  "type": "text",
  "id": "scelta",
  "label": "Scelta"
},
    {
  "type": "text",
  "id": "materiale",
  "label": "Materiale"
},
    {
  "type": "text",
  "id": "finitura",
  "label": "Finitura"
},
    {
  "type": "text",
  "id": "effetto",
  "label": "Effetto"
},
    {
  "type": "text",
  "id": "stonalizzazione",
  "label": "Stonalizzazione"
},
    {
  "type": "text",
  "id": "forma",
  "label": "Forma"
},
    {
  "type": "text",
  "id": "formato",
  "label": "Formato"
},
    {
  "type": "text",
  "id": "spessore",
  "label": "Spessore"
},
    {
  "type": "text",
  "id": "prezzoscatola",
  "label": "Prezzo per scatola"
},
    {
  "type": "text",
  "id": "prezzomq",
  "label": "Prezzo al mq"
},
    {
  "type": "text",
  "id": "pesopallet",
  "label": "Peso al pallet"
},
    {
  "type": "text",
  "id": "mqpallet",
  "label": "Mq al pallet"
},
    {
  "type": "text",
  "id": "scatolepallet",
  "label": "Scatole per pallet"
},
    {
  "type": "text",
  "id": "mqscatola",
  "label": "Mq per scatola"
},
    {
  "type": "text",
  "id": "pesoscatola",
  "label": "Peso per scatola"
},
    {
  "type": "text",
  "id": "pezziscatola",
  "label": "Pezzi per scatola"
}
    ],
    "templates": ["index", "page", "product"],
  "presets": [
    {
      "name": "specifiche",
      "category": "reference"
    }
  ]
  }
{% endschema %}
